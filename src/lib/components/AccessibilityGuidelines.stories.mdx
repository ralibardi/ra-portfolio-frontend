import { Meta } from '@storybook/blocks';

<Meta title="Accessibility Guidelines" />

# Accessibility Guidelines

This component library is built with accessibility as a core principle. Every component meets or exceeds WCAG 2.1 AA standards and follows WAI-ARIA authoring practices.

## üéØ Accessibility Standards

### WCAG 2.1 AA Compliance

All components comply with Web Content Accessibility Guidelines (WCAG) 2.1 Level AA:

- **Perceivable**: Information is presentable in ways users can perceive
- **Operable**: Interface components are operable by all users
- **Understandable**: Information and UI operation are understandable
- **Robust**: Content is robust enough for various assistive technologies

### WAI-ARIA Patterns

Components follow established WAI-ARIA authoring practices:
- **Button**: Standard button behavior and states
- **Dialog (Modal)**: Focus trapping and proper labeling
- **Tabpanel (Tabs)**: Keyboard navigation and selection
- **Accordion**: Expandable/collapsible content
- **Combobox (Select)**: Dropdown selection with keyboard support

## ‚å®Ô∏è Keyboard Navigation

### Universal Keyboard Support

All interactive components support keyboard navigation:

#### Standard Keys
- **Tab**: Move focus forward through interactive elements
- **Shift + Tab**: Move focus backward through interactive elements
- **Enter**: Activate buttons, links, and form controls
- **Space**: Activate buttons and toggle checkboxes
- **Escape**: Close modals, dropdowns, and overlays

#### Component-Specific Keys

**Accordion**
- **Arrow Down/Up**: Navigate between accordion headers
- **Home/End**: Jump to first/last accordion header
- **Space/Enter**: Toggle accordion section

**Tabs**
- **Arrow Left/Right**: Navigate between tabs (horizontal)
- **Arrow Up/Down**: Navigate between tabs (vertical)
- **Home/End**: Jump to first/last tab
- **Space/Enter**: Activate focused tab

**Select/Dropdown**
- **Arrow Down/Up**: Navigate through options
- **Home/End**: Jump to first/last option
- **Type ahead**: Jump to option starting with typed character
- **Enter**: Select focused option
- **Escape**: Close dropdown

**Pagination**
- **Arrow Left/Right**: Navigate to previous/next page
- **Home/End**: Jump to first/last page
- **Space/Enter**: Activate page button

## üîç Screen Reader Support

### Semantic HTML

Components use appropriate semantic HTML elements:

```html
<!-- Buttons use button elements -->
<button type="button">Click me</button>

<!-- Navigation uses nav elements -->
<nav aria-label="Breadcrumb">
  <ol>
    <li><a href="/">Home</a></li>
    <li aria-current="page">Current Page</li>
  </ol>
</nav>

<!-- Form inputs have proper labels -->
<label for="email">Email Address</label>
<input type="email" id="email" required />
```

### ARIA Attributes

Proper ARIA attributes provide context for screen readers:

#### Common ARIA Attributes
- **aria-label**: Accessible name when visible text isn't sufficient
- **aria-labelledby**: References element(s) that label the current element
- **aria-describedby**: References element(s) that describe the current element
- **aria-expanded**: Indicates if collapsible element is expanded
- **aria-controls**: References element(s) controlled by the current element
- **aria-current**: Indicates current item in a set
- **aria-disabled**: Indicates element is disabled
- **aria-hidden**: Hides decorative elements from screen readers

#### Component Examples

**Modal**
```html
<div role="dialog" aria-modal="true" aria-labelledby="modal-title">
  <h2 id="modal-title">Confirm Action</h2>
  <p>Are you sure you want to delete this item?</p>
</div>
```

**Accordion**
```html
<button
  aria-expanded="false"
  aria-controls="panel-1"
  id="header-1"
>
  Section Title
</button>
<div
  id="panel-1"
  role="region"
  aria-labelledby="header-1"
>
  Section content
</div>
```

**Form Input**
```html
<label for="password">Password</label>
<input
  type="password"
  id="password"
  aria-describedby="password-help password-error"
  aria-invalid="true"
/>
<div id="password-help">Must be at least 8 characters</div>
<div id="password-error" role="alert">Password is too short</div>
```

## üé® Visual Accessibility

### Color and Contrast

#### Color Contrast Requirements
- **Normal text**: 4.5:1 contrast ratio minimum
- **Large text** (18pt+ or 14pt+ bold): 3:1 contrast ratio minimum
- **UI components**: 3:1 contrast ratio for borders and states

#### Color Independence
- Information is not conveyed by color alone
- Icons and text labels accompany color coding
- Error states include text descriptions, not just red coloring

### Focus Indicators

All focusable elements have visible focus indicators:

```scss
.interactive-element {
  &:focus-visible {
    outline: 2px solid var(--focus-color);
    outline-offset: 2px;
  }
}
```

#### Focus Indicator Standards
- **Minimum thickness**: 2px
- **Contrast ratio**: 3:1 against background
- **Visibility**: Clear distinction from unfocused state
- **Consistency**: Same style across all components

## üé≠ Motion and Animation

### Reduced Motion Support

All animations respect user motion preferences:

```scss
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
```

### Animation Guidelines
- **Essential motion only**: Animations serve a functional purpose
- **Reasonable duration**: Not too fast (< 100ms) or too slow (> 1s)
- **Smooth easing**: Natural feeling transitions
- **Respect preferences**: Honor prefers-reduced-motion setting

## üì± Responsive Accessibility

### Mobile Accessibility

#### Touch Targets
- **Minimum size**: 44px √ó 44px (iOS) or 48dp √ó 48dp (Android)
- **Adequate spacing**: At least 8px between touch targets
- **Clear boundaries**: Visual indication of interactive areas

#### Mobile Screen Readers
- **VoiceOver** (iOS): Full support with proper gestures
- **TalkBack** (Android): Complete navigation and interaction
- **Voice Control**: Voice commands for all interactive elements

### Zoom and Magnification
- **200% zoom**: All content remains functional and readable
- **400% zoom**: Content reflows appropriately
- **No horizontal scrolling**: At standard zoom levels

## üß™ Testing Accessibility

### Automated Testing

Components include automated accessibility tests:

```javascript
// Example accessibility test
import { render } from '@testing-library/react';
import { axe, toHaveNoViolations } from 'jest-axe';

expect.extend(toHaveNoViolations);

test('Button has no accessibility violations', async () => {
  const { container } = render(<Button>Click me</Button>);
  const results = await axe(container);
  expect(results).toHaveNoViolations();
});
```

### Manual Testing Checklist

#### Keyboard Testing
- [ ] All interactive elements are focusable
- [ ] Focus order is logical and intuitive
- [ ] No keyboard traps (can always escape)
- [ ] All functionality available via keyboard
- [ ] Focus indicators are clearly visible

#### Screen Reader Testing
- [ ] Content is announced correctly
- [ ] Navigation landmarks are present
- [ ] Form labels are properly associated
- [ ] Error messages are announced
- [ ] State changes are communicated

#### Visual Testing
- [ ] Sufficient color contrast
- [ ] Text is readable at 200% zoom
- [ ] Focus indicators are visible
- [ ] Content doesn't rely on color alone
- [ ] Touch targets meet minimum size requirements

### Testing Tools

#### Browser Extensions
- **axe DevTools**: Automated accessibility scanning
- **WAVE**: Web accessibility evaluation
- **Lighthouse**: Accessibility audit included
- **Colour Contrast Analyser**: Color contrast checking

#### Screen Readers
- **NVDA** (Windows): Free, widely used
- **JAWS** (Windows): Professional screen reader
- **VoiceOver** (macOS/iOS): Built-in Apple screen reader
- **TalkBack** (Android): Built-in Android screen reader

## üìã Component-Specific Guidelines

### Button
- Use `<button>` element, not `<div>` with click handlers
- Include `type` attribute (`button`, `submit`, or `reset`)
- Provide accessible names for icon-only buttons
- Indicate loading states to screen readers

### Form Components
- Associate labels with form controls using `for`/`id`
- Use `fieldset` and `legend` for grouped controls
- Provide error messages with `aria-describedby`
- Mark required fields appropriately

### Modal/Dialog
- Trap focus within the modal
- Return focus to trigger element on close
- Use `role="dialog"` and `aria-modal="true"`
- Provide accessible names with `aria-labelledby`

### Navigation
- Use `<nav>` element for navigation regions
- Provide `aria-label` for multiple navigation areas
- Mark current page with `aria-current="page"`
- Use proper heading hierarchy

## üéØ Best Practices Summary

### Do's ‚úÖ
- Use semantic HTML elements
- Provide alternative text for images
- Ensure keyboard accessibility
- Test with screen readers
- Follow ARIA authoring practices
- Maintain proper heading hierarchy
- Provide clear error messages
- Respect user preferences

### Don'ts ‚ùå
- Don't rely on color alone for information
- Don't use placeholder text as labels
- Don't create keyboard traps
- Don't use `div` or `span` for interactive elements
- Don't hide focus indicators
- Don't use auto-playing media with sound
- Don't use very small text or touch targets
- Don't ignore accessibility testing

## ü§ù Getting Help

### Resources
- [WCAG 2.1 Guidelines](https://www.w3.org/WAI/WCAG21/quickref/)
- [WAI-ARIA Authoring Practices](https://www.w3.org/WAI/ARIA/apg/)
- [WebAIM Articles](https://webaim.org/articles/)
- [A11y Project Checklist](https://www.a11yproject.com/checklist/)

### Community
- [WebAIM Discussion List](https://webaim.org/discussion/)
- [A11y Slack Community](https://web-a11y.slack.com/)
- [Accessibility Twitter Community](https://twitter.com/hashtag/a11y)

---

Remember: Accessibility is not a feature to be added later‚Äîit's a fundamental aspect of good design and development. By following these guidelines, you ensure that your applications are usable by everyone.